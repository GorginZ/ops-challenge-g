#!/usr/bin/env bash

die() { echo “${1:-something went wrong}“; exit “${2:-1}“; }

hash wget || die "wget not found"

die() { echo “${1:-something went wrong}“; exit “${2:-1}“; }

hash jq || die "jq not found"



wget https://ip-ranges.amazonaws.com/ip-ranges.json > ip-ranges.json


jq -r '[.prefixes[] | select(.region=="ap-southeast-2" and .service=="S3").ip_prefix] | .[]' < ip-ranges.json
